{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.more');\nconst lightBox = new SimpleLightbox('.gallery-link');\nconst body = document.querySelector('body');\nconst themeswitch = document.querySelector('.checkbox');\nlet page = 1;\nlet perPage = 15;\nlet searchQuery;\nloadBtn.style.display = 'none';\nloader.style.display = 'none';\n\nconst saveTheme = localStorage.getItem('theme');\nconst parsedSaveTheme = JSON.parse(saveTheme);\nif (parsedSaveTheme === true) {\n  body.classList.remove('light-theme');\n  body.classList.add('dark-theme');\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  page = 1;\n  loadBtn.style.display = 'none';\n  gallery.innerHTML = '';\n  searchQuery = form.elements.search.value.trim();\n  if (searchQuery === '') {\n    iziToast.show({\n      message: 'Please write search image',\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  loader.style.display = 'inline-block';\n  try {\n    const { hits, totalHits } = await fetchImage(searchQuery, page);\n    if (totalHits === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FAFAFB',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n      });\n      loader.style.display = 'none';\n      return;\n    }\n    renderGallery(hits);\n    if (totalHits < perPage) {\n      notification();\n    } else {\n      loadBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Sorry, ${error}`,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    form.reset();\n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  page += 1;\n\n  loader.style.display = 'inline-block';\n  try {\n    const { hits, totalHits } = await fetchImage(searchQuery, page);\n    renderGallery(hits);\n    scroll();\n    if (perPage * page > totalHits) {\n      notification();\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Sorry, ${error}`,\n      messageColor: '#FAFAFB',\n      backgroundColor: '#EF4040',\n      position: 'bottomCenter',\n    });\n  }\n});\n\nasync function fetchImage(searchQuery, page) {\n  const searchParams = {\n    key: '42093583-bfe36716eb3593f6644c471e3',\n    q: searchQuery,\n    page,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n  };\n  const urlparams = new URLSearchParams(searchParams);\n  const { data } = await axios.get(`https://pixabay.com/api/?${urlparams}`);\n  return data;\n}\n\nfunction renderGallery(images) {\n  const markup = images\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      width = \"360\"\n      />\n    </a>\n    <div class=\"img-text\">\n    <div class=\"img-info\">\n    <h3>Likes</h3>\n    <p> ${likes}</p>\n    </div>\n    <div class=\"img-info\">\n    <h3>Views</h3>\n    <p> ${views}</p>\n    </div>\n       <div class=\"img-info\">\n    <h3>Comments</h3>\n    <p> ${comments}</p>\n    </div>\n       <div class=\"img-info\">\n    <h3>Downloads</h3>\n    <p> ${downloads}</p>\n    </div>\n      </div>\n  </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightBox.refresh();\n\n  loader.style.display = 'none';\n}\n\nfunction notification() {\n  iziToast.show({\n    message: 'We are sorry, but you have reached the end of search results.',\n    messageColor: '#FAFAFB',\n    backgroundColor: '#1DB8F5',\n    position: 'topRight',\n  });\n  loadBtn.style.display = 'none';\n  loader.style.display = 'none';\n}\n\nfunction scroll() {\n  const listItem = document.querySelector('.gallery-item');\n  const heightScroll = listItem.getBoundingClientRect().height * 2;\n  window.scrollBy({\n    top: heightScroll,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nthemeswitch.addEventListener('click', e => {\n  if (themeswitch.checked === true) {\n    body.classList.remove('light-theme');\n    body.classList.add('dark-theme');\n  } else {\n    body.classList.remove('dark-theme');\n    body.classList.add('light-theme');\n  }\n  localStorage.setItem('theme', JSON.stringify(themeswitch.checked));\n});\n"],"names":["form","gallery","loader","loadBtn","lightBox","SimpleLightbox","body","themeswitch","page","perPage","searchQuery","saveTheme","parsedSaveTheme","e","iziToast","hits","totalHits","fetchImage","renderGallery","notification","error","scroll","searchParams","urlparams","data","axios","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","heightScroll"],"mappings":"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"}